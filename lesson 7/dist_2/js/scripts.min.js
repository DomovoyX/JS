//анимация с requestAnimationFrame
window.addEventListener('load', function(){

	let btn = document.querySelector(".start");

	function myFly(){
	 	let obj = document.querySelector(".obj"),
				posLeft = 0,
				posTop = 0;

			// draw - функция отрисовки, duration	- продолжительность анимации 
		function fly(draw, duration) {
		  var start = performance.now();

		  requestAnimationFrame(function fly(time) {
		    // определяем, сколько прошло времени с начала анимации
		    var timePassed = time - start;

		    // если появится небольшое превышение времени, то зафиксировать конец
		    if (timePassed > duration) {
		    	timePassed = duration;
		    };

		    // рисуем состояние анимации в момент timePassed
		    draw(timePassed);

		    // если время анимации не закончилось - планируем ещё кадр
		    if (timePassed < duration) {
		      requestAnimationFrame(fly);
		    }

		  });
		}

		fly(function(timePassed) {			
			if (timePassed <= 800){
				obj.style.backgroundColor = '#16a52f';
				posLeft += 2;
				posTop += 2;
				obj.style.top = posTop + 'px';
				obj.style.left = posLeft + 'px';
			} else if (timePassed > 800 && timePassed < 1600) {
				posLeft += 2;
				posTop -= 2;
				obj.style.top = posTop + 'px';
				obj.style.left = posLeft + 'px';
			} else if (timePassed == 1600){
				obj.style.backgroundColor = 'red';
			}
		}, 1600);

	};

	btn.addEventListener('click', myFly);

});	


/*
let btn = document.querySelector('.start');

function myAnimation() {
	let elem = document.querySelector('.obj'),
	pos = 0,
	id = setInterval(fly, 10);
	console.log(id);

	function fly() {
		if (pos == 200) {
			clearInterval(id);
		} else {
			pos++;
			elem.style.top = pos + 'px';
			elem.style.left = pos + 'px';
		}	
	}
}

btn.addEventListener('click', myAnimation);*/